<?xml version="1.0" encoding="utf-8"?>
<ui:UXML
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ui="UnityEngine.UIElements"
    xmlns:uie="UnityEditor.UIElements"
    xsi:noNamespaceSchemaLocation="../../UIElementsSchema/UIElements.xsd">

  <ui:VisualElement class="root">

    <!-- Header -->
    <ui:VisualElement class="header">
      <ui:Label text="Vehicle Editor" class="header-title" />
      <ui:Label name="statusLabel" text="Ready" class="header-status" />
    </ui:VisualElement>

    <!-- Main Content Row -->
    <ui:VisualElement class="main-content">

      <!-- Left Pane: Hierarchy + Preview -->
      <ui:VisualElement class="left-pane">
        <ui:Label text="Hierarchy" class="section-header" />
        <ui:VisualElement name="HierarchyTree" class="hierarchy-tree" />
        <ui:Label text="3D Preview" class="section-header" />
        
        <!-- Gizmo controls -->
        <ui:VisualElement class="gizmo-controls">
          <ui:Toggle name="WheelGizmos" label="Wheels" value="true" class="gizmo-toggle" />
          <ui:Toggle name="ColliderGizmos" label="Colliders" value="true" class="gizmo-toggle" />
          <ui:Toggle name="SuspensionGizmos" label="Suspension" value="true" class="gizmo-toggle" />
        </ui:VisualElement>
        
        <ui:IMGUIContainer name="PreviewContainer" class="preview-container" />
      </ui:VisualElement>

      <!-- Center Pane: Tab Panels -->
      <ui:VisualElement class="center-pane">
        <!-- Tab Strip -->
        <ui:VisualElement name="TabStrip" class="tab-strip" />
        
        <!-- Dynamic Tabs -->
        <ui:VisualElement name="TabContent" class="tab-panels">

          <!-- Welcome Tab -->
          <ui:ScrollView name="Welcome" class="panel-container" style="display: none;">
            <ui:Label text="Welcome to UVS" class="large-header" />
            <ui:Box class="info-box">
              <ui:Label text="â€¢ Import Prefab" />
              <ui:Label text="â€¢ Assign Vehicle ID" />
              <ui:Label text="â€¢ Finalize Info" />
              <ui:Label text="â€¢ Classify Parts" />
              <ui:Label text="â€¢ Configure Wheels" />
            </ui:Box>
            <ui:Box class="warning-box">
              <ui:Label text="Only prefab assets (from Project, not Scene) are supported." />
              <ui:Label text="Changes require Apply to persist." />
            </ui:Box>
          </ui:ScrollView>

          <!-- Info Tab -->
          <ui:ScrollView name="Info" class="panel-container" style="display: none;">
            <ui:Label text="Info" class="panel-header" />
            <ui:VisualElement class="dropzone" name="DropZone">
              <ui:Label name="DropZoneLabel" text="Drag a Prefab into this box." />
            </ui:VisualElement>

            <ui:TextField    name="VehicleName"       label="Vehicle Name" />
            <ui:EnumField    name="VehicleTypeField"  label="Vehicle Type" />
            <ui:TextField    name="ManufacturerField" label="Manufacturer" />
            <ui:IntegerField name="YearField"         label="Year" />
            <ui:TextField    name="SeedField"         label="ID Seed (3 chars)" max-length="3" />

            <ui:Button name="GenerateIDButton" text="ðŸ§ª Generate Final ID" class="button-primary" />
            <ui:Label  name="InfoErrorLabel" class="warning-box" style="display: none;" />
            <ui:Label  text="Vehicle ID:" />
            <ui:Label  name="IDLabel" />
          </ui:ScrollView>

          <!-- Parts Tab -->
          <ui:ScrollView name="Parts" class="panel-container" style="display: none;">
            <uie:Toolbar>
              <ui:Button name="RescanPartsButton" text="ðŸ” Re-Scan Parts" />
              <ui:Button name="AutoTagButton"     text="Auto-Assign Tags" />
              <ui:Button name="SavePartsButton"   text="Save Parts" />
              <ui:Button name="LoadPartsButton"   text="Load Parts" />
            </uie:Toolbar>
            <ui:VisualElement name="PartsContent" class="parts-content" />
          </ui:ScrollView>

          <!-- Wheels Tab -->
          <ui:ScrollView name="Wheels" class="panel-container" style="display: none;">
            <uie:Toolbar>
              <ui:Button name="MeasureWheelsButton"  text="Measure Wheels" />
              <ui:Button name="ApplyCollidersButton" text="Apply Colliders" />
            </uie:Toolbar>
            <ui:VisualElement name="WheelsContent" class="wheels-list" />
          </ui:ScrollView>

          <!-- Measurements Tab -->
          <ui:ScrollView name="Measurements" class="panel-container" style="display: none;">
            <ui:Label text="Measurements" class="panel-header" />
            <uie:Toolbar>
              <ui:Button name="MeasureDimensionsButton" text="ðŸ“ Measure Vehicle Dimensions" />
              <ui:Button name="ExportMeasurementsButton" text="Export Data" />
            </uie:Toolbar>
            <ui:VisualElement name="MeasurementsContent" class="measurements-content" />
          </ui:ScrollView>
          
          <!-- Suspension Tab -->
          <ui:ScrollView name="Suspension" class="panel-container" style="display: none;">
            <ui:Label text="Suspension" class="panel-header" />
            <uie:Toolbar>
              <ui:Button name="AutoSetupSuspensionButton" text="Auto-Setup Suspension" />
              <ui:Button name="ResetSuspensionButton" text="Reset" />
            </uie:Toolbar>
          </ui:ScrollView>

          <!-- Engine Tab -->
          <ui:ScrollView name="Engine" class="panel-container" style="display: none;">
            <ui:Label text="Engine" class="panel-header" />
            <uie:Toolbar>
              <ui:Button name="AutoSetupEngineButton" text="Auto-Setup Engine" />
              <ui:Button name="ResetEngineButton" text="Reset" />
            </uie:Toolbar>
          </ui:ScrollView>

          <!-- Brakes Tab -->
          <ui:ScrollView name="Brakes" class="panel-container" style="display: none;">
            <ui:Label text="Brakes" class="panel-header" />
            <uie:Toolbar>
              <ui:Button name="AutoSetupBrakesButton" text="Auto-Setup Brakes" />
              <ui:Button name="ResetBrakesButton" text="Reset" />
            </uie:Toolbar>
          </ui:ScrollView>

          <!-- Steering Tab -->
          <ui:ScrollView name="Steering" class="panel-container" style="display: none;">
            <ui:Label text="Steering" class="panel-header" />
            <uie:Toolbar>
              <ui:Button name="AutoSetupSteeringButton" text="Auto-Setup Steering" />
              <ui:Button name="ResetSteeringButton" text="Reset" />
            </uie:Toolbar>
          </ui:ScrollView>

          <!-- Body Tab -->
          <ui:ScrollView name="Body" class="panel-container" style="display: none;">
            <ui:Label text="Body" class="panel-header" />
            <uie:Toolbar>
              <ui:Button name="AutoSetupBodyButton" text="Auto-Setup Body" />
              <ui:Button name="ResetBodyButton" text="Reset" />
            </uie:Toolbar>
          </ui:ScrollView>

          <!-- Fuel System Tab -->
          <ui:ScrollView name="FuelSystem" class="panel-container" style="display: none;">
            <ui:Label text="Fuel System" class="panel-header" />
            <uie:Toolbar>
              <ui:Button name="AutoSetupFuelButton" text="Auto-Setup Fuel System" />
              <ui:Button name="ResetFuelButton" text="Reset" />
            </uie:Toolbar>
            <ui:VisualElement name="FuelSystemContent" class="fuel-system-content" />
          </ui:ScrollView>

        </ui:VisualElement>
      </ui:VisualElement>

      <!-- Right Pane: Console -->
      <ui:VisualElement class="right-pane">
        <ui:Box name="CustomConsole" class="console-box">
          <ui:Label text="Console" class="console-header" />
          <ui:ScrollView class="console-scrollview">
            <ui:VisualElement name="ConsoleContent" class="console-content" />
          </ui:ScrollView>
          <ui:VisualElement class="console-controls">
            <ui:Button name="ClearConsoleButton" text="Clear" class="console-button" />
            <ui:Button name="ExportConsoleButton" text="Export" class="console-button" />
          </ui:VisualElement>
        </ui:Box>
      </ui:VisualElement>

    </ui:VisualElement>
  </ui:VisualElement>
</ui:UXML>